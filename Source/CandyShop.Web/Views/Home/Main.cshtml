
@{
    ViewBag.Title = "Main";
}

<link href="~/Content/Main.css" rel="stylesheet" />

<!--menu lateral-->
<ul id="slide-out" class="side-nav">
    <li>
        <div class="user-view">
            <div class="background">
                <img src="../../Imagens/fundo4.jpg" style="opacity: 0.5">
            </div>
            <a href="#!user"><img class="circle" src="../../Imagens/user.png"></a>
            <a href="#!name"><span class="brown-text name">Nome do usuario</span></a>
            <a href="#!name"><span class="red-text name">Saldo R$0,00</span></a>
        </div>
    </li>
    <li><a href="#!"><i class="material-icons">attach_money</i>Pagamento</a></li>
    <li><a href="#!"><i class="material-icons">find_in_page</i>Historico</a></li>
    <li><a href="#!"><i class="material-icons">shopping_cart</i>Carrinho atual</a></li>
</ul>

<!--modal de quantidade-->
<div id="modal1" class="modal">
    <div class="modal-content center">
        <h3>Quantidade</h3>
        <form class="center">
            <input type="text" id="quantidade" class="center" autocomplete="off"/>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#modal2" id="confirmacao" class="modal-trigger modal-close waves-effect waves-green btn-flat">Confirma</a>
    </div>
</div>

<!--modal de confirmação-->
<div id="modal2" class="modal">
    <div class="modal-content center">
        <h3>Confirmar venda?</h3>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Confirmar</a>
    </div>
</div>

<!--barra de navegação-->
<ul id="dropdown1" class="dropdown-content">
    <li><a href="#!">Carrinho atual</a></li>
    <li><a href="#!">Pagamento</a></li>
    <li><a href="#!">Histórico</a></li>
    <li class="divider"></li>
    <li>>@Html.ActionLink("Sair","Index")</li>
</ul>

<nav class="brown">
    <div class="nav-wrapper">
        <a href="#!" class="brand-logo right"><i class="material-icons">store</i>Candy Shop</a>
        <ul class="left hide-on-med-and-down">
            <li><a class="dropdown-button" href="#!" data-activates="dropdown1">Opções<i class="material-icons right">arrow_drop_down</i></a></li>
            <li><a class="dropdown-button" href="#!"><i class="material-icons left">account_circle</i>Nome do usuario R$ 0,00</a></li>
        </ul>
    </div>
</nav>

<!--exemplo do grid de produtos-->
<div class="row">
    <div class="col s12 m4 l2">
        <div class="card">
            <div class="card-image">
                <img src="../../Imagens/moranguete.jpg">
                <span class="card-title flow-text">Moranguete</span>
                <a href="#modal1" id="abreModal" class="modal-trigger btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-delay="50" data-tooltip="Nome do produto R$ 0,80"><i class="material-icons">add</i></a>
            </div>
            <div class="card-content">
                <p>R$ 0,80</p>
            </div>
        </div>
    </div>

    <div class="col s12 m4 l2">
        <div class="card">
            <div class="card-image">
                <img src="../../Imagens/amendoim.jpg">
                <span class="card-title flow-text">Amendoim</span>
                <a href="#modal1" id="abreModal" class="modal-trigger btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-delay="50" data-tooltip="Nome do produto R$ 0,80"><i class="material-icons">add</i></a>
            </div>
            <div class="card-content">
                <p>R$ 1,00</p>
            </div>
        </div>
    </div>

    <div class="col s12 m4 l2">
        <div class="card">
            <div class="card-image">
                <img src="../../Imagens/paçoca.jpg">
                <span class="card-title flow-text">Paçoca</span>
                <a href="#modal1" id="abreModal" class="modal-trigger btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-delay="50" data-tooltip="Nome do produto R$ 0,80"><i class="material-icons">add</i></a>
            </div>
            <div class="card-content">
                <p>R$ 0,25</p>
            </div>
        </div>
    </div>

    <div class="col s12 m4 l2">
        <div class="card">
            <div class="card-image">
                <img src="../../Imagens/chocolate1.jpg">
                <span class="card-title flow-text">Chocolate Hershey's</span>
                <a href="#modal1" id="abreModal" class="modal-trigger btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-delay="50" data-tooltip="Nome do produto R$ 0,80"><i class="material-icons">add</i></a>
            </div>
            <div class="card-content">
                <p>R$ 3,50</p>
            </div>
        </div>
    </div>

    <div class="col s12 m4 l2">
        <div class="card">
            <div class="card-image">
                <img src="../../Imagens/chocolate2.jpg">
                <span class="card-title flow-text">Chocolate Moça</span>
                <a href="#modal1" id="abreModal" class="modal-trigger btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-delay="50" data-tooltip="Nome do produto R$ 0,80"><i class="material-icons">add</i></a>
            </div>
            <div class="card-content">
                <p>R$ 2,00</p>
            </div>
        </div>
    </div>

    <div class="col s12 m4 l2">
        <div class="card">
            <div class="card-image">
                <img src="../../Imagens/chocolate3.jpg">
                <span class="card-title flow-text">Chocolate Garoto</span>
                <a href="#modal1" id="abreModal" class="modal-trigger btn-floating halfway-fab waves-effect waves-light red tooltipped" data-position="bottom" data-delay="50" data-tooltip="Nome do produto R$ 0,80"><i class="material-icons">add</i></a>
            </div>
            <div class="card-content">
                <p>R$ 1,80</p>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        $('.tooltipped').tooltip({ delay: 50 });
        $(".button-collapse").sideNav();
        $('select').material_select();
        $('.caret').hide();
        $('.modal').modal();
    });

    $('#quantidade').on('keydown',function() {
        mNumbers($('#quantidade').val());
    });

    var verifyInt = /^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$/;

    $('#abreModal').on('click', function () {
        mNumbers($('#quantidade').val(''));   
    });

    $('#quantidade').on('blur', function () {
        mNumbers($('#quantidade').val());
        if ($('#quantidade').val().match(verifyInt)) {
           $('#confirmacao').removeClass('modal-close modal-trigger');
        } else if ($('#quantidade').val() == 0) {
            $('#confirmacao').removeClass('modal-close modal-trigger');
        } else {
            $('#confirmacao').addClass('modal-close modal-trigger');
        }
    });

    $('#confirmacao').on('click', function () {
        if ($('#quantidade').val().match(verifyInt)) {
            $('#confirmacao').removeClass('modal-close modal-trigger');
        } else if ($('#quantidade').val() == 0) {
            $('#confirmacao').removeClass('modal-close modal-trigger');
        } else {
            $('#confirmacao').addClass('modal-close modal-trigger');
        }
    });

    function mNumbers(v) {
        v = v.replace(/\D/g, "");
        $('#quantidade').val(v);
    }
</script>